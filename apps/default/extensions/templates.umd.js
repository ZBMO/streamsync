(function(e,h){typeof exports=="object"&&typeof module<"u"?module.exports=h(require("vue"),require("../injectionKeys")):typeof define=="function"&&define.amd?define(["vue","../injectionKeys"],h):(e=typeof globalThis<"u"?globalThis:e||self,e.WriterCustomComponentTemplates=h(e.vue,e.injectionKeys))})(this,function(e,h){"use strict";var c=(t=>(t.Text="Text",t.KeyValue="Key-Value",t.Color="Color",t.Shadow="Shadow",t.Number="Number",t.Object="Object",t.IdKey="Identifying Key",t.Width="Width",t.HAlign="Align (H)",t.VAlign="Align (V)",t.Padding="Padding",t))(c||{}),y=(t=>(t.General="General",t.Style="Style",t))(y||{}),T=(t=>(t.Text="Text",t.Textarea="Textarea",t))(T||{});const W={name:"Accent",type:c.Color,category:y.Style,applyStyleVariable:!0},$={name:"Primary text",type:c.Color,category:y.Style,applyStyleVariable:!0},z={name:"Secondary text",type:c.Color,category:y.Style,applyStyleVariable:!0};c.Color,y.Style;const v={name:"Container background",type:c.Color,category:y.Style,applyStyleVariable:!0},F={name:"Container shadow",type:c.Shadow,category:y.Style,applyStyleVariable:!0},E={name:"Separator",type:c.Color,category:y.Style,applyStyleVariable:!0},D={name:"Button",type:c.Color,category:y.Style,applyStyleVariable:!0},A={name:"Button text",type:c.Color,category:y.Style,applyStyleVariable:!0},H={name:"Button shadow",type:c.Shadow,category:y.Style,applyStyleVariable:!0},V={name:"Custom CSS classes",type:c.Text,category:y.Style,desc:"CSS classes, separated by spaces. You can define classes in custom stylesheets."};c.Width,y.Style;const J={name:"Content alignment (H)",type:c.HAlign,default:"unset",category:y.Style};c.VAlign,y.Style;const L={name:"Padding",type:c.Padding,default:"0",category:y.Style},N=t=>(e.pushScopeId("data-v-c4a195cd"),t=t(),e.popScopeId(),t),U=N(()=>e.createElementVNode("div",{class:"triangle"},null,-1)),q={class:"message"},K={class:"text"},Y=[N(()=>e.createElementVNode("i",{class:"material-symbols-outlined"}," keep ",-1))],G=[N(()=>e.createElementVNode("i",{class:"material-symbols-outlined"}," flag ",-1))],R={writer:{name:"Bubble Message (Advanced)",description:"Shows a message in the shape of a speech bubble.",category:"Content",fields:{messageId:{name:"Message id",desc:"Unique id to identify the message when generating events.",init:"a1",type:c.Text},text:{name:"Text",desc:"The message to be displayed.",default:"(Empty message)",type:c.Text,control:T.Textarea},orientation:{name:"Orientation",category:y.Style,type:c.Text,options:{left:"Pointing left",right:"Pointing right"}},bubbleColor:{name:"Bubble",default:"#CFEFF3",category:y.Style,type:c.Color,applyStyleVariable:!0},primaryTextColor:$,separatorColor:E,containerBackgroundColor:v,cssClasses:V},events:{"pin-message":{desc:"Emitted when the pin button is clicked.",stub:`
def handle_pin(state, payload):
	state["pinned_message_id"] = payload`},"flag-message":{desc:"Emitted when the flag button is clicked.",stub:`
def handle_flag(state, payload):
	state["flagged_message_id"] = payload`}},previewField:"text"}},O=e.defineComponent({...R,__name:"BubbleMessageAdvanced",setup(t){const s=e.ref(null),r=e.inject(h.evaluatedFields),i=e.computed(()=>r.messageId.value);function g(){const _=i.value,b=new CustomEvent("flag-message",{detail:{payload:_}});s.value.dispatchEvent(b)}function p(){const _=i.value,b=new CustomEvent("pin-message",{detail:{payload:_}});s.value.dispatchEvent(b)}return(_,b)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"rootEl",ref:s,class:e.normalizeClass(["BubbleMessage",{rightOriented:e.unref(r).orientation.value=="right"}])},[U,e.createElementVNode("div",q,[e.createElementVNode("div",K,e.toDisplayString(e.unref(r).text.value),1),e.createElementVNode("div",{class:"actions"},[e.createElementVNode("div",{class:"action",onClick:p},Y),e.createElementVNode("div",{class:"action",onClick:g},G)])])],2))}}),M=t=>{t.writer&&(t.writer.docs=`\r
This documentation will show in the collapsible mini-docs feature embedded in Builder.\r
You _can_ use **markdown**.\r`)},I=(t,s)=>{const r=t.__vccOpts||t;for(const[i,g]of s)r[i]=g;return r};typeof M=="function"&&M(O);const Q=I(O,[["__scopeId","data-v-c4a195cd"]]),X=t=>(e.pushScopeId("data-v-8b3b1a5a"),t=t(),e.popScopeId(),t),Z={class:"BubbleMessage"},ee=X(()=>e.createElementVNode("div",{class:"triangle"},null,-1)),te={class:"message"},ne={writer:{name:"Bubble Message",description:"Shows a message in the shape of a speech bubble.",category:"Content",fields:{text:{name:"Text",type:c.Text}},previewField:"text"}},oe=e.defineComponent({...ne,__name:"BubbleMessage",setup(t){const s=e.inject(h.evaluatedFields);return(r,i)=>(e.openBlock(),e.createElementBlock("div",Z,[ee,e.createElementVNode("div",te,e.toDisplayString(e.unref(s).text.value),1)]))}}),ae=I(oe,[["__scopeId","data-v-8b3b1a5a"]]),se={};function le(t,s){return e.openBlock(),e.createElementBlock("button",null,[e.renderSlot(t.$slots,"default",{},void 0,!0)])}const re=I(se,[["render",le],["__scopeId","data-v-96f12980"]]);function ie(t){const s={ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,metaKey:t.metaKey};return new CustomEvent("wf-click",{detail:{payload:s}})}const ce={key:0,class:"material-symbols-outlined"},de={writer:{name:"Button",description:"A standalone button component that can be linked to a click event handler.",category:"Other",events:{"wf-click":{desc:"Capture single clicks.",stub:`
def handle_button_click(state):

	# Increment counter when the button is clicked

	state["counter"] += 1`.trim()}},fields:{text:{name:"Text",init:"Button Text",type:c.Text},customId:{name:"CustomId",init:"Button CustomId",type:c.Text},isDisabled:{name:"Disabled",default:"no",type:c.Text,options:{yes:"Yes",no:"No"},desc:"Disables all event handlers."},buttonColor:D,buttonTextColor:A,icon:{name:"Icon",type:c.Text,desc:'A Material Symbols id, such as "arrow_forward".',category:y.Style},buttonShadow:H,separatorColor:E,cssClasses:V},previewField:"text"}},j=e.defineComponent({...de,__name:"CustomButton",setup(t){const s=e.ref(null),r=e.inject(h.evaluatedFields),i=e.inject(h.isDisabled);e.watch(r.isDisabled,p=>{i.value=p=="yes"},{immediate:!0});function g(p){if(!s.value)return;const _=ie(p);s.value.$el.dispatchEvent(_)}return(p,_)=>(e.openBlock(),e.createBlock(re,{ref_key:"rootInstance",ref:s,class:"CoreButton","aria-disabled":e.unref(i),onClick:g},{default:e.withCtx(()=>[e.unref(r).icon.value?(e.openBlock(),e.createElementBlock("i",ce,e.toDisplayString(e.unref(r).icon.value),1)):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(e.unref(r).text.value),1)]),_:1},8,["aria-disabled"]))}}),P=t=>{t.writer&&(t.writer.docs="\r\n    Writer Framework uses Material Symbols to display icons. To include an icon, check https://fonts.google.com/icons, find the icon's id (such as `arrow_forward`) and it to your _Button_.\r")};typeof P=="function"&&P(j);const ue=I(j,[["__scopeId","data-v-b9b549d4"]]),pe=I(e.defineComponent({__name:"BaseContainer",props:{contentHAlign:{},contentVAlign:{},contentPadding:{},isHorizontal:{type:Boolean}},setup(t){const s=t,r=e.computed(()=>{const i={padding:s.contentPadding};return s.isHorizontal?{...i,justifyContent:s.contentHAlign,alignItems:s.contentVAlign}:{...i,alignItems:s.contentHAlign,justifyContent:s.contentVAlign}});return(i,g)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["BaseContainer",{horizontal:s.isHorizontal}]),style:e.normalizeStyle(r.value),"data-writer-container":""},[e.renderSlot(i.$slots,"default",{},void 0,!0)],6))}}),[["__scopeId","data-v-c26ebaf3"]]),fe={class:"CoreSection"},me={key:0},ye={writer:{name:"Section",description:"A container component that divides the layout into sections, with an optional title.",category:"Layout",allowedChildrenTypes:["*"],fields:{title:{name:"Title",init:"Custom Section Title",desc:"Leave blank to hide.",type:c.Text},accentColor:W,primaryTextColor:$,secondaryTextColor:z,containerBackgroundColor:v,containerShadow:F,separatorColor:E,buttonColor:D,buttonTextColor:A,buttonShadow:H,contentPadding:{...L,default:"16px"},contentHAlign:J,cssClasses:V},previewField:"title"}},ge=e.defineComponent({...ye,__name:"CustomSection",setup(t){const s=e.inject(h.evaluatedFields),r=e.inject(h.core),i=e.inject(h.instancePath);function g(a){const o=a.target.closest("[data-writer-id]");if(_(o)||(a.stopPropagation(),b(o)))return;const n=p(o);console.log("customId: "+n);const l=new CustomEvent("click",{detail:{payload:{id:n}}});r.forwardEvent(l,i,!0)}function p(a){var o=r.getComponentById(a.dataset.writerId),n=o.content.customId,l=a.dataset.writerId;return n!=""?n:l}function _(a){var o=r.getComponentById(a.dataset.writerId);return o.type=="tab"}function b(a){return a.nodeName!="BUTTON"}function C(a,o){const n=a.target.nodeName;return console.log("this element type: "+n),!o.includes(n)}function d(a){const o=a.target.closest("[data-writer-id]");if(a.stopPropagation(),C(a,["INPUT"]))return;const n=p(o),l=a.target.value,f=new CustomEvent("input",{detail:{payload:{id:n,value:l}}});r.forwardEvent(f,i,!0)}return(a,o)=>(e.openBlock(),e.createElementBlock("section",fe,[e.unref(s).title.value?(e.openBlock(),e.createElementBlock("h3",me,e.toDisplayString(e.unref(s).title.value),1)):e.createCommentVNode("",!0),e.createVNode(pe,{onClickCapture:g,onInputCapture:d,"content-h-align":e.unref(s).contentHAlign.value,"content-padding":e.unref(s).contentPadding.value},{default:e.withCtx(()=>[e.renderSlot(a.$slots,"default",{},void 0,!0)]),_:3},8,["content-h-align","content-padding"])]))}}),_e=I(ge,[["__scopeId","data-v-995f4827"]]);function be(t){const s=/[\\]?@{([^}]*)}/g;function r(d,a){var f;let o=[],n="",l=0;for(let u=0;u<d.length;u++){const m=d.charAt(u);m=="."?l==0?(o.push(n),n=""):n+=m:m=="["?(l==0?(o.push(n),n=""):n+=m,l++):m=="]"?(l--,l==0?n=(f=i(n,a))==null?void 0:f.toString():n+=m):n+=m}return n&&o.push(n),o}function i(d,a){let n=a?g(a):void 0,l=t.getUserState();const f=r(d,a);for(let u=0;u<f.length;u++)n=n==null?void 0:n[f[u]],l=l==null?void 0:l[f[u]];return n??l}function g(d){var o,n;const a={};for(let l=0;l<d.length-1;l++){const f=d[l],{componentId:u}=f,{type:m}=t.getComponentById(u);if(m!=="repeater"||l+1>=d.length)continue;const S=d.slice(0,l+1),k=d.slice(0,l+2),{instanceNumber:w}=k.at(-1),B=b(S,"repeaterObject");if(!B)continue;const x=Object.entries(B),Ee=b(S,"keyVariable"),Ne=b(S,"valueVariable");a[Ee]=(o=x[w])==null?void 0:o[0],a[Ne]=(n=x[w])==null?void 0:n[1]}return a}function p(d,a){return d==null?"":d.replace(s,(n,l)=>{if(n.charAt(0)=="\\")return n.substring(1);const f=l.trim();if(!f)return"";const u=i(f,a);return typeof u>"u"?"":typeof u=="object"?JSON.stringify(u):u.toString()})}function _(d){const{componentId:a}=d.at(-1),o=t.getComponentById(a);if(!o)return;const n={},{fields:l}=t.getComponentDefinition(o.type);if(l)return Object.keys(l).forEach(f=>{n[f]=e.computed(()=>b(d,f))}),n}function b(d,a){var w;const{componentId:o}=d.at(-1),n=t.getComponentById(o);if(!n)return;const{fields:l}=t.getComponentDefinition(n.type),f=(w=n.content)==null?void 0:w[a],u=l[a].default,m=p(f,d),S=l[a].type,k=typeof m>"u"||m===null||m==="";if(S==c.Object||S==c.KeyValue){if(!m)return JSON.parse(u??null);if(typeof m!="string")return m;let B;try{B=JSON.parse(m)}catch{return JSON.parse(u)??null}return B}else if(S==c.Number){const B=u===null?null:parseFloat(u);if(k)return B??null;const x=parseFloat(m);return typeof x===void 0||Number.isNaN(x)?B??null:x}else return S==c.IdKey?f:k?u??"":m}function C(d,a){const o=t.getComponentById(d);return o?typeof o.visible>"u"||o.visible===!0?!0:o.visible===!1?!1:!!i(o.visible,a):void 0}return{getEvaluatedFields:_,isComponentVisible:C,evaluateExpression:i}}function he(t,s,r){const i=e.ref(),g=e.ref(!1),p=e.ref(null),_=s.at(-1).componentId,b=e.computed(()=>t.getComponentById(_)),{evaluateExpression:C}=be(t);function d(){var n;const o=t.getComponentById(_);if((n=o==null?void 0:o.binding)!=null&&n.stateRef)return C(o.binding.stateRef,s)}function a(o,n,l){var k,w;i.value=o;const f=(k=b.value.handlers)==null?void 0:k[n],u=((w=b.value.binding)==null?void 0:w.eventType)==n;if(!f&&!u)return;if(g.value){p.value={eventValue:o,emitEventType:n};return}g.value=!0;const m=()=>{g.value=!1,p.value&&(a(p.value.eventValue,p.value.emitEventType),p.value=null),l==null||l()},S=new CustomEvent(n,{detail:{payload:o,callback:m}});r.value instanceof HTMLElement?r.value.dispatchEvent(S):r.value.$el.dispatchEvent(S)}return e.watch(()=>d(),o=>{g.value||(i.value=o)},{immediate:!0}),e.watch(i,o=>{typeof o>"u"&&(i.value="")},{immediate:!0}),{formValue:i,handleInput:a}}const Se={key:0},Ce=I(e.defineComponent({__name:"BaseInputWrapper",props:{label:{},isHorizontal:{type:Boolean}},setup(t){const s=t;return(r,i)=>(e.openBlock(),e.createElementBlock("div",{ref:"rootEl",class:e.normalizeClass(["BaseInputWrapper",{horizontal:r.isHorizontal}])},[s.label?(e.openBlock(),e.createElementBlock("label",Se,e.toDisplayString(s.label),1)):e.createCommentVNode("",!0),e.renderSlot(r.$slots,"default",{},void 0,!0)],2))}}),[["__scopeId","data-v-01f6be93"]]),Ie=I(e.defineComponent({__name:"WdsDropdownInput",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(t){const s=e.useModel(t,"modelValue");return(r,i)=>e.withDirectives((e.openBlock(),e.createElementBlock("select",{"onUpdate:modelValue":i[0]||(i[0]=g=>s.value=g)},[e.renderSlot(r.$slots,"default",{},void 0,!0)],512)),[[e.vModelSelect,s.value]])}}),[["__scopeId","data-v-303ac61c"]]),we=["value"],Be="A user input component that allows users to select a single value from a list of options using a dropdown menu.",ke={a:"Option A",b:"Option B"},xe={writer:{name:"Dropdown Input",description:Be,category:"Input",fields:{label:{name:"Label",init:"Input Label",type:c.Text},options:{name:"Options",desc:"Key-value object with options. Must be a JSON string or a state reference to a dictionary.",type:c.KeyValue,default:JSON.stringify(ke,null,2)},cssClasses:V},events:{"wf-option-change":{desc:"Sent when the selected option changes.",stub:`
def onchange_handler(state, payload):

	# Set the state variable "selected" to the selected option

	state["selected"] = payload`.trim(),bindable:!0}}}},Ve=e.defineComponent({...xe,__name:"CustomDropDownInput",setup(t){const s=e.inject(h.evaluatedFields),r=e.ref(null),i=e.inject(h.core),g=e.inject(h.instancePath),{formValue:p,handleInput:_}=he(i,g,r);return(b,C)=>(e.openBlock(),e.createBlock(Ce,{ref_key:"rootInstance",ref:r,label:e.unref(s).label.value,class:"CoreDropdownInput"},{default:e.withCtx(()=>[e.createVNode(Ie,{modelValue:e.unref(p),"onUpdate:modelValue":C[0]||(C[0]=d=>e.isRef(p)?p.value=d:null),onInput:C[1]||(C[1]=d=>e.unref(_)(d.target.value,"wf-option-change"))},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(s).options.value,(d,a)=>(e.openBlock(),e.createElementBlock("option",{key:a,value:a},e.toDisplayString(d),9,we))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]))}});return{bubblemessageadvanced:Q,bubblemessage:ae,custombutton:ue,customsection:_e,customdropdown:I(Ve,[["__scopeId","data-v-f5f4ff64"]])}});
